pipeline {
  
  agent any
  
  stages {
    stage('Status') {
      steps {
        sh 'liquibase --search-path=C:\Liquibase-Demo --changelogfile=changelog.xml --url="jdbc:sqlserver://liquibase-demoserver.database.windows.net:1433;database=Liquibase-Demo-db;user=adminlogin@liquibase-demoserver;password=Liquibase@123;encrypt=true;trustServerCertificate=false;hostNameInCertificate=*.database.windows.net;loginTimeout=30" status'
      }
    }
    stage('Update') {
      steps {
        sh 'liquibase update --url="jdbc:sqlserver://liquibase-demoserver.database.windows.net:1433;database=Liquibase-Demo-db;user=adminlogin@liquibase-demoserver;password=Liquibase@123;encrypt=true;trustServerCertificate=false;hostNameInCertificate=*.database.windows.net;loginTimeout=30"'
      }
    }
  }
  post {
    always {
      cleanWs()
    }
  }
}
